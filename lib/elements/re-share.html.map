{"version":3,"names":[],"mappings":"","sources":["re-share.jade"],"sourcesContent":["link(rel=\"import\" href=\"../bower_components/polymer/polymer.html\")\nlink(rel=\"import\" href=\"../bower_components/iron-ajax/iron-ajax.html\")\nlink(rel=\"import\" href=\"re-styles.html\")\n\ndom-module#re-share\n\t// ---------------------------------------------------------------\t\n\tstyle(include=\"re-styles\")\n\tstyle\n\t\t:stylus\n\t\t\t:host\n\t\t\t\ta\n\t\t\t\t\tdisplay: block\n\t\t\t\t\tspan\n\t\t\t\t\t\tdisplay: block\n\n\t// ---------------------------------------------------------------\t\n\ttemplate\n\t\ta(href='[[href]]')\n\t\t\tspan.share-name {{type}}\n\t\t\tspan.share-count {{stats.count}}\n\n\t// ---------------------------------------------------------------\t\n\tscript\n\t\t:coffeescript\n\t\t\tPolymer\n\t\t\t\tis: 're-share'\n\t\t\t\tproperties:\n\t\t\t\t\ttype:\n\t\t\t\t\t\ttype: String\n\t\t\t\t\t\tvalue: 'facebook'\n\n\t\t\t\t\toptions:\n\t\t\t\t\t\ttype: Object\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\treferer: 'rekreators.eu'\n\t\t\t\t\t\t\tvia: 'rekreators'\n\t\t\t\t\t\t\ttext: 'This is share text'\n\t\t\t\t\t\t\tfbAppID: 548215208596151\n\n\t\t\t\t\thref:\n\t\t\t\t\t\ttype: String\n\t\t\t\t\t\tcomputed: 'makeHref(type, options)'\n\n\t\t\t\t\tstats:\n\t\t\t\t\t\ttype: Object\n\t\t\t\t\t\tcomputed: 'getStats(type)'\n\n\n\t\t\t\tmakeHref: (type, options)->\n\t\t\t\t\tif type is 'facebook'\n\t\t\t\t\t\tbase = 'https://www.facebook.com/dialog/share?'\n\t\t\t\t\t\tquery =\n\t\t\t\t\t\t\tapp_id: \t\toptions.fbAppID\n\t\t\t\t\t\t\tdisplay: \t\t'popup'\n\t\t\t\t\t\t\thref: \t\t\twindow.location.href\n\t\t\t\t\t\t\tredirect_uri: \twindow.location.href\n\t\t\t\t\t\treturn base + $.param query\n\n\t\t\t\t\telse if type is 'twitter'\n\t\t\t\t\t\tbase = 'https://twitter.com/intent/tweet?'\n\t\t\t\t\t\tquery =\n\t\t\t\t\t\t\toriginal_referer: \toptions.referer\n\t\t\t\t\t\t\tvia: \t\t\t\toptions.via\n\t\t\t\t\t\t\ttext: \t\t\t\toptions.text\n\t\t\t\t\t\t\tsource: \t\t\t'tweetbutton'\n\t\t\t\t\t\t\turl: \t\t\t\twindow.location.href\n\t\t\t\t\t\treturn base + $.param query\n\n\t\t\t\tgetStats: (type)->\n\t\t\t\t\tif type is 'facebook'\n\t\t\t\t\t\tbase = 'http://api.facebook.com/restserver.php?'\n\t\t\t\t\t\tquery =\n\t\t\t\t\t\t\tmethod: 'links.getStats'\n\t\t\t\t\t\t\turls: window.location.href\n\t\t\t\t\t\turl = base + $.param query\n\t\t\t\t\t\tclient = new XMLHttpRequest()\n\t\t\t\t\t\tclient.open \"GET\", url\n\t\t\t\t\t\tclient.send()\n\t\t\t\t\t\tresponse = client.responseXML\n\t\t\t\t\t\tstats =\n\t\t\t\t\t\t\tshares: \t$(response).find('share_count').text()\n\t\t\t\t\t\t\tlikes: \t\t$(response).find('like_count').text()\n\t\t\t\t\t\t\tcomments: \t$(response).find('comment_count').text()\n\t\t\t\t\t\t\tcount: \t\t$(response).find('total_count').text()\n\t\t\t\t\telse if type is 'twitter'\n\t\t\t\t\t\toptions =\n\t\t\t\t\t\t\turl: 'http://opensharecount.com/count.json?url=' + window.location.href\n\t\t\t\t\t\t\ttype: 'get'\n\t\t\t\t\t\t\tasync: false\n\t\t\t\t\t\t\tsuccess: (response)->\n\t\t\t\t\t\t\t\tstats = response\n\t\t\t\t\t\t$.ajax options\n\t\t\t\t\t\tif stats.count is 0 then stats.count = ''\n\t\t\t\t\t\treturn stats\n\n\t\t\t\t\t\t\n\n\t\t\t\n\t\t\t\t\n\t\t\t\tready: ->\n\t\t\t\t\t###\n\t\t\t\t\t`ready` is called after all elements have been configured, but\n\t\t\t\t\tpropagates bottom-up. This element's children are ready, but parents\n\t\t\t\t\tare not.\n\t\t\t\t\tThis is the point where you should make modifications to the DOM (when\n\t\t\t\t\tnecessary), or kick off any processes the element wants to perform.\n\t\t\t\t\t###\n\t\t\t\t\tthis.check_deps(this.deps)\n\t\t\t\t\treturn\n\t\t\t\tattached: ->\n\t\t\t\t\t###\n\t\t\t\t\t`attached` fires once the element and its parents have been inserted\n\t\t\t\t\tinto a document.\n\t\t\t\t\tThis is a good place to perform any work related to your element's\n\t\t\t\t\tvisual state or active behavior (measuring sizes, beginning animations,\n\t\t\t\t\tloading resources, etc).\n\t\t\t\t\t###\n\t\t\t\t\treturn\n\t\t\t\tdetached: ->\n\t\t\t\t\t###\n\t\t\t\t\tThe analog to `attached`, `detached` fires when the element has been\n\t\t\t\t\tremoved from a document.\n\t\t\t\t\tUse this to clean up anything you did in `attached`.\n\t\t\t\t\t###\n\t\t\t\t\treturn\n\n\n\t\t\t\tcheck_deps: ->\n\t\t\t\t\tdeps = ['jQuery']\n\t\t\t\t\tthisis = this.is\n\t\t\t\t\tfor dep in deps\n\t\t\t\t\t\tdo (dep)->\n\t\t\t\t\t\t\tif typeof window[dep] is 'undefined'\n\t\t\t\t\t\t\t\tconsole.log thisis + ' polymer element needs ' + dep\n"],"file":"re-share.html","sourceRoot":"/source/"}